env: prod
http:
  host: 0.0.0.0
  #  host: 127.0.0.1
  port: 8000
security:
  api_sign:
    app_key: 123456
    app_security: 123456
  jwt:
    key: QQYnRFerJTSEcrfB89fw8prOaObmrch8
data:
  db:
    user:
      driver: sqlite
      dsn: storage/nunu-test.db?_busy_timeout=5000
  #    user:
  #      driver: mysql
  #      dsn: root:123456@tcp(127.0.0.1:3380)/user?charset=utf8mb4&parseTime=True&loc=Local
  #    user:
  #      driver: postgres
  #      dsn: host=localhost user=gorm password=gorm dbname=gorm port=9920 sslmode=disable TimeZone=Asia/Shanghai
  redis:
    addr: 127.0.0.1:6350
    password: ""
    db: 0
    read_timeout: 0.2s
    write_timeout: 0.2s

log:
  log_level: info
  encoding: json           # json or console
  log_file_name: "./storage/logs/server.log"
  max_backups: 30
  max_age: 7
  max_size: 1024
  compress: true

# gh-ost 配置（用于在线 DDL 变更）
# https://github.com/github/gh-ost
ghost:
  path: "/usr/local/bin/gh-ost"  # Gh-ost工具路径（生产环境需要修改为实际路径）
  args:                           # Gh-ost工具参数列表
    - "--allow-on-master"
    - "--assume-rbr"
    - "--initially-drop-ghost-table"
    - "--initially-drop-old-table"
    - "-initially-drop-socket-file"
    - "-exact-rowcount"
    - "--approve-renamed-columns"
    - "--concurrent-rowcount=false"
    - "--chunk-size=800"
    - "--attempt-instant-ddl"
    - "--hooks-path=/tmp"

# DAS (Data Access Service) 配置
das:
  max_execution_time: 600000    # 最大执行时间（毫秒），默认 10 分钟
  default_return_rows: 1000     # 默认返回行数（当 SQL 没有 LIMIT 时自动添加）
  max_return_rows: 10000        # 最大返回行数（当 SQL 的 LIMIT 超过此值时，自动改写为 LIMIT max_return_rows）

# 定时任务配置
crontab:
  sync_db_metas: "*/5 * * * *"  # 每5分钟同步一次远程数据库库表元数据到本地数据库
  scan_scheduled_orders: "*/30 * * * * *"  # 每30秒扫描一次待注册的定时工单

# LLM 配置（API 同步 - AI 自动填充）
llm:
  enable: true
  base_url: "https://open.bigmodel.cn/api/paas/v4"
  api_key: "2eb8e43816284ef9bbccf1c127a9d31d.hVzV1lvyIbBDW3SD"
  model: "glm-5"

# 消息通知配置（用于工单消息推送）
notify:
  notice_url: "https://noah.qixiangyun.com"  # 工单详情页面的基础URL（生产环境需要修改）
  wechat:
    enable: false  # 是否启用企业微信通知
    webhook: ""    # 企业微信机器人Webhook地址
  dingtalk:
    enable: false  # 是否启用钉钉通知
    webhook: ""    # 钉钉机器人Webhook地址
    keywords: ""   # 钉钉关键词（可选）
  mail:
    enable: false  # 是否启用邮件通知
    username: ""   # 发件人邮箱
    password: ""   # 发件人邮箱密码
    host: ""       # SMTP服务器地址
    port: 465      # SMTP端口